# PHYS_549_package
This is a Python package repository for the PHYS 549 class project, "Denoising and fine feature extraction in angle-resolved photoemission spectroscopy data using a convolutional neural network".

## Operating procedure
1. Download the "PHYS_549_package" directory.
2. Go to the terminal and create a virtual environment to for the "ArpesCNN" package. For instance, type "conda create -n ArpesCNN_sim python=3.7" in your terminal to create an enviroment named "ArpesCNN_sim". 
3. Activate the virtual environment. Change directory to ".../PHYS_549_package/ArpesCNN". Type "python setup.py develop" to install the ArpesCNN package enabling tight-binding (TB) and angle-resolved photoemission spectroscopy (ARPES) data simulation. The "setup.py" file will automatically install numpy, scipy, matplotlib and chinook python packages in the environment. If you create the environment with python 3.9 or 3.10, an error will pop up for the "tilt.py" file in the chinook package. Go to that python file and change "from collections import" to "from collections.abc import".
3. Go to "PHYS_549_package/SR-CNN/dataset" folder and run the file "Dataset_gen.py", where you can choose how many data cubes and how many slices to 
take within each cube. You can separately set cube numbers for training, validation, and testing dataset, but the three numbers shouold add up to the total cube number specified in the "Dataset_gen.py" file. The parameters for the tight binding models are randomized. After running "Dataset_gen.py", 9 folders will be created under the same directory. All the TB data is saved to the directories with the suffix "hr" meaning high-resolution, and all the ARPES data is saved to the directories with the suffix "lr" meaning low-resolution. The naming of the ARPES (TB) cut takes the form of "ARPES_sim_x1_x2.npy" ("TB_sim_x1_x2.npy"), where "x1" is the cube index, and "x2" is the cut index in the x1-th cube. Randomized parameters for each cube are recorded in the "Parameters" folder. "Visualizations" folder shows all the corresponding simulated TB and ARPES images.
5. Go to a tensorflow environment to run file ".../PHYS_549_package/SR-CNN/run.py" to train the neural network. In the ".../PHYS-549-package/SR-CNN/run.py" file, you can change the training batch size, validation batch size and epoch number. The default setting here is training batch size = 32, validation batch size = 16, and epoch number = 20. Learning rate can be adjusted in ".../PHYS-549-package/SR-CNN/source/neuralnet.py". Note that the Tensorflow environment may not be compatible with the ArpesCNN or Chinook package, so it is recommended to run the dataset simulation and neural network training in separate virtual environments.
